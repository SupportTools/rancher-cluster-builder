nodes:
  - address: 172.27.7.21
    user: root
    hostname_override: a1ubrancherl01
    internal_address: 172.27.7.21
    role: [controlplane,worker,etcd]
#  - address: 172.27.7.22
#    user: root
#    hostname_override: a1ubrancherl02
#    internal_address: 172.27.7.22
#    role: [controlplane,worker,etcd]
#  - address: 172.27.7.23
#    user: root
#    hostname_override: a1ubrancherl03
#    internal_address: 172.27.7.23
#    role: [controlplane,worker,etcd]

ingress:
  provider: nginx

services:
  etcd:
    backup_config:
      enabled: true     # enables recurring etcd snapshots
      interval_hours: 12 # time increment between snapshots
      retention: 7     # time in days before snapshot purge
      s3backupconfig:
        access_key: "s3backupconfig.access_key"
        secret_key:  "s3backupconfig.secret_key"
        bucket_name: "s3backupconfig.bucket_name"
        folder: "s3backupconfig.folder"
        endpoint: "s3backupconfig.endpoint"
        region: "s3backupconfig.region"

cloud_provider:
  name: vsphere
  vsphereCloudProvider:
    disk: {}
    global:
      insecure-flag: true
      soap-roundtrip-count: 0
    network: {}
    virtual_center:
      cloud_provider.virtual_center:
        datacenters: cloud_provider.datacenters
        port: cloud_provider.port
        soap-roundtrip-count: 0
        user: cloud_provider.username
        password: cloud_provider.password
    workspace:
      datacenter: cloud_provider.datacenters
      default-datastore: cloud_provider.default-datastore
      folder: cloud_provider.folder
      server: cloud_provider.virtual_center

dns:
  provider: coredns
  upstreamnameservers:
  - 172.27.2.23
  - 172.27.2.24

kubernetes_version: v1.20.7-rancher1-1

system_images:
  etcd: a1-harbor.support.tools/cache/rancher/coreos-etcd:v3.4.15-rancher1
  alpine: a1-harbor.support.tools/cache/rancher/rke-tools:v0.1.75
  nginx_proxy: a1-harbor.support.tools/cache/rancher/rke-tools:v0.1.75
  cert_downloader: a1-harbor.support.tools/cache/rancher/rke-tools:v0.1.75
  kubernetes: a1-harbor.support.tools/cache/rancher/hyperkube:v1.20.7-rancher1
  kubernetes_services_sidecar: a1-harbor.support.tools/cache/rancher/rke-tools:v0.1.75
  pod_infra_container: a1-harbor.support.tools/cache/rancher/mirrored-pause:3.2

  # CoreDNS images
  coredns: a1-harbor.support.tools/cache/rancher/mirrored-coredns-coredns:1.8.0
  coredns_autoscaler: a1-harbor.support.tools/cache/rancher/mirrored-cluster-proportional-autoscaler:1.8.1

  # Calico images
  calico_node: a1-harbor.support.tools/cache/rancher/mirrored-calico-node:v3.17.2
  calico_cni: a1-harbor.support.tools/cache/rancher/mirrored-calico-cni:v3.17.2
  calico_controllers: a1-harbor.support.tools/cache/rancher/mirrored-calico-kube-controllers:v3.17.2
  calico_ctl: a1-harbor.support.tools/cache/rancher/mirrored-calico-ctl:v3.17.2
  calico_flex_vol: a1-harbor.support.tools/cache/rancher/mirrored-calico-pod2daemon-flexvol:v3.17.2

  # Canal images
  canal_node: a1-harbor.support.tools/cache/rancher/mirrored-calico-node:v3.17.2
  canal_cni: a1-harbor.support.tools/cache/rancher/mirrored-calico-cni:v3.17.2
  canal_controllers: a1-harbor.support.tools/cache/rancher/mirrored-calico-kube-controllers:v3.17.2
  canal_flannel: a1-harbor.support.tools/cache/rancher/coreos-flannel:v0.13.0-rancher1
  canal_flex_vol: a1-harbor.support.tools/cache/rancher/mirrored-calico-pod2daemon-flexvol:v3.17.2

  # Ingress controller images
  ingress: a1-harbor.support.tools/cache/rancher/nginx-ingress-controller:nginx-0.43.0-rancher3
  ingress_backend: a1-harbor.support.tools/cache/rancher/mirrored-nginx-ingress-controller-defaultbackend:1.5-rancher1

  # Metrics server image
  metrics_server: a1-harbor.support.tools/cache/rancher/mirrored-metrics-server:v0.4.1
